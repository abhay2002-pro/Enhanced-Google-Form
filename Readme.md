## Chosen Approach
- Utilizing a microservices architecture with a task queue for asynchronous processing. Each post-submission action, including Google Sheets integration, is handled by a dedicated microservice.

## Solution Architecture

### Data-Platform-Server

- Manages CRUD operations for forms, responses, questions, and companies.
- Raises events in Kafka upon data submission.

### Google-Sheet-Server

- Listens to the "form-submissions" Kafka topic.
- Parses messages and writes relevant data to Google Sheets.

### SMS-Server

- Listens to the "form-submissions" Kafka topic.
- Parses messages and sends SMS notifications based on response data.

![Design](https://github.com/abhay2002-pro/Atlan-Backend-Assignment/blob/main/System-Design.png)

## MongoDB Choice:
The choice of MongoDB was made due to the unstructured format of forms and responses. MongoDB's flexible schema allows for easy adaptation to changing requirements and supports the dynamic nature of form data.

# Database Design Specification

## 1. Companies Collection:
- **Collection Name:** `companies`
- **Attributes:**
  - `_id` (automatically generated by MongoDB)
  - `companyName` (String, required, unique)
  - `companyMetaData` (Object)

## 2. Forms Collection:
- **Collection Name:** `forms`
- **Attributes:**
  - `_id` (automatically generated by MongoDB)
  - `companyId` (Reference to `companies` collection, required)
  - `formName` (String, required)
  - `formMetaData` (Object)

## 3. Questions Collection:
- **Collection Name:** `questions`
- **Attributes:**
  - `_id` (automatically generated by MongoDB)
  - `formId` (Reference to `forms` collection, required)
  - `questionText` (String, required)
  - `questionType` (String, required, should be one of the predefined types in {text, multipleChoice, numeric, date})
  - `questionMetadata` (Object)

## 4. Responses Collection:
- **Collection Name:** `responses`
- **Attributes:**
  - `_id` (automatically generated by MongoDB)
  - `formId` (Reference to `forms` collection, required)
  - `responderPhoneNumber` (String, required)
  - `responseMetadata` (Object)
- **Index:** Ensure a unique index on `formId` and `responderPhoneNumber` to prevent duplicate responses for the same form from the same responder.

## Relationships:
- `companies` and `forms`: One-to-Many (One company can have multiple forms)
- `forms` and `questions`: One-to-Many (One form can have multiple questions)
- `forms` and `responses`: One-to-Many (One form can have multiple responses)
  
## Diagram:

### Entity-Relationship Diagram:
```
+-------------------+         +----------------------+
|    Companies      |         |      Answers         |
+-------------------+         +----------------------+
| _id               |         | _id                  |
| companyName       |		      | formId               |
| companyMetaData   |         | responderPhoneNumber |
|                   |         | responseMetadata     |
|					          |		      |	                     |
+-------------------+         +----------------------+
         |                            |
         |                            |
         |                            |
         |                            |
         |                            |
+-------------------+         +---------------------+
|     Forms     	  |         |                     |
+-------------------+         +---------------------+
| _id               |         | _id                 |
| companyId         |---------| formId              |
| formName          |         | questionText        |
| formMetaData      |         | questionType        |
|                   |         | questionMetadata    |
+-------------------+         +---------------------+
```



